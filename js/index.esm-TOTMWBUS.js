import{a as u}from"./chunk-HJSTZ4VX.js";import"./chunk-BUUHZZM3.js";var r=t=>Array.isArray(t)?u.random(t[0],t[1]):t,C=(t,e)=>{for(e=e.toUpperCase();t;){if(t.nodeName===e)return!0;t=t.parentNode}return!1},I=(t,e)=>{let a=e.move.indexOf("emit");if(a>=0){let{emitRadius:i=[50,180]}=e.moveOptions[a]||{},n=u.random(0,360)*Math.PI/180,s=[-1,1][u.random(0,1)]*r(i);t.endPos={x:t.x+s*Math.cos(n),y:t.y+s*Math.sin(n)}}},L=(t,e)=>{let a=e.move.indexOf("rotate");if(a>=0){let{angle:i=[-180,180]}=e.moveOptions[a]||{};t.endRotation=r(i)}},x=t=>Array.isArray(t)?t.map(e=>e*100):[t*100,t*100],P=class{constructor(t,e,a,i,n,s,o){this.ctx=t,this.x=e,this.y=a,this.color=i,this.radius=n,this.alpha=s,this.lineWidth=o,this.rotation=0}draw(){let{ctx:t,x:e,y:a}=this;t.save(),t.translate(e,a),t.rotate(this.rotation*(Math.PI/180)),t.globalAlpha=this.alpha;let i=this.color;if(this.color.startsWith("var(")){let[,n]=this.color.match(/var\((--[^)]+)\)/)||[];n&&(i=getComputedStyle(document.documentElement).getPropertyValue(n).trim())}this.paint(),this.lineWidth?(t.lineWidth=this.lineWidth,t.strokeStyle=i,t.stroke()):(t.fillStyle=i,t.fill()),t.globalAlpha=1,t.restore()}},T=class extends P{paint(){let{ctx:t}=this;t.beginPath(),t.arc(0,0,this.radius,0,2*Math.PI),t.closePath()}},E=class extends P{constructor(t,e,a,i,n,s,o,l){super(t,e,a,i,n,s,l),this.sides=o}paint(){let{ctx:t,sides:e,radius:a}=this;t.beginPath(),t.moveTo(a*Math.cos(0),a*Math.sin(0));for(let i=1;i<=e;i++){let n=i*2*Math.PI/e;t.lineTo(a*Math.cos(n),a*Math.sin(n))}t.closePath()}},w=class extends P{constructor(t,e,a,i,n,s,o,l){super(t,e,a,i,n,s,l),this.spikes=o}paint(){let{ctx:t,spikes:e,radius:a}=this;t.beginPath(),t.moveTo(0,-a);for(let i=0;i<e*2;i++){let n=i*Math.PI/e-Math.PI/2,s=i%2===0?a:a*.5,o=Math.cos(n)*s,l=Math.sin(n)*s;t.lineTo(o,l)}t.closePath()}},R={circle:T,polygon:E,star:w},S=(t,e,a,i)=>{let n=R[i.shape],{shapeOptions:s,colors:o,number:l}=i,{radius:p,alpha:d=1,lineWidth:m}=s;return d=x(d),Array.from({length:r(l)},()=>{let v=o[u.random(0,o.length-1)],g=[t,e,a,v,r(p),r(d)/100];n===w?g.push(r(s.spikes)):n===E&&g.push(r(s.sides));let y=new n(...g,r(m));return I(y,i),L(y,i),y})},h=document.createElement("canvas");h.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:9999999",document.body.appendChild(h);var c=h.getContext("2d"),O=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?"touchstart":"click",W=0,b=0,M=()=>{if(!c)return;let{clientWidth:t,clientHeight:e}=document.documentElement;h.width=t*2,h.height=e*2,h.style.width=t+"px",h.style.height=e+"px",c.setTransform(1,0,0,1,0,0),c.scale(2,2)},z=t=>{var e,a;W=(e=t.clientX)!==null&&e!==void 0?e:t.touches&&t.touches[0].clientX,b=(a=t.clientY)!==null&&a!==void 0?a:t.touches&&t.touches[0].clientY},D=t=>{let{move:e,moveOptions:a}=t,i={};return e.forEach((n,s)=>{if(n==="emit"){let{radius:o=.1,alphaChange:l=!1,alphaEasing:p="linear",alphaDuration:d=[600,800],alpha:m=0}=a[s]||{};i={x:v=>v.endPos.x,y:v=>v.endPos.y,radius:r(o)},l&&(i.alpha={value:r(x(m))/100,easing:p,duration:r(d)})}else if(n==="diffuse"){let{diffuseRadius:o=[80,160],lineWidth:l=0,alphaEasing:p="linear",alphaDuration:d=[600,800],alpha:m=0}=a[s]||{};i={radius:r(o),lineWidth:r(l),alpha:{value:r(x(m))/100,easing:p,duration:r(d)}}}else n==="rotate"&&(i.rotation=o=>o.endRotation)}),i},N=t=>{for(let e of t)e.draw()},X=u({duration:1/0,update(){c&&c.clearRect(0,0,h.width,h.height)}}),f=null,A=null,k=t=>{A=t,f&&document.removeEventListener(O,f,!1),f=e=>{t.excludeElements.some(a=>C(e.target,a))||(X.play(),z(e),Y(W,b))},document.addEventListener(O,f,!1),M(),window.removeEventListener("resize",M,!1),window.addEventListener("resize",M,!1)},Y=(t,e)=>{if(!A||!c)return;let{particles:a}=A,i=u().timeline();a.forEach(n=>{let{move:s,moveOptions:o}=n;n.move=Array.isArray(s)?s:[s],n.moveOptions=o?Array.isArray(o)?o:[o]:[],i.add({targets:S(c,t,e,n),duration:r(n.duration),easing:n.easing||"linear",update:N,...D(n)})}),i.play()},H=t=>{document.readyState==="loading"?window.addEventListener("DOMContentLoaded",()=>k(t),{passive:!0}):k(t)};export{H as default};
