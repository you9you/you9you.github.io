var P=class{constructor(){this.queue=[]}add(t){return this.queue.push(new q(t)),this}play(){this.queue.forEach(t=>t.play())}},T={targets:null,duration:1/0,easing:"linear",delay:0,begin:null,update:null,complete:null},j=()=>{let t={linear:()=>e=>e},i={Sine:()=>e=>1-Math.cos(e*Math.PI/2),Expo:()=>e=>e?Math.pow(2,10*e-10):0,Circ:()=>e=>1-Math.sqrt(1-e*e),Back:()=>e=>e*e*(3*e-2),Bounce:()=>e=>{let o,l=4;for(;e<((o=Math.pow(2,--l))-1)/11;);return 1/Math.pow(4,3-l)-7.5625*Math.pow((o*3-2)/22-e,2)}};return["Quad","Cubic","Quart","Quint"].forEach((e,o)=>{i[e]=()=>l=>Math.pow(l,o+2)}),Object.keys(i).forEach(e=>{let o=i[e];t["easeIn"+e]=o,t["easeOut"+e]=()=>l=>1-o()(1-l),t["easeInOut"+e]=()=>l=>l<.5?o()(l*2)/2:1-o()(l*-2+2)/2,t["easeOutIn"+e]=()=>l=>l<.5?(1-o()(1-l*2))/2:(o()(l*2-1)+1)/2}),t},E=j(),v=["translateX","translateY","translateZ"],$=(t,i)=>t instanceof HTMLElement?"transform"in t.style&&v.includes(i)?"transform":i in t.style?"style":"attribute":"attribute",I=t=>{let i=Date.now()+t.delay,e=i+t.duration,o=!!t.targets,l=[],M=()=>{if(o){Array.isArray(t.targets)||(t.targets=[t.targets]);for(let r of t.targets){let n={};for(let s in t.dest){let a=t.dest[s],f=$(r,s);if(Array.isArray(a))if(a.length===2&&typeof a[0]!="object")f==="transform"?r.style.transform=`${s}(${typeof a[0]=="string"?a[0]:a[0]+"px"})`:f==="style"?r.style[s]=a[0]:r[s]=a[0],n[s]=a[0],t.dest[s]=a[1];else{let y=0;for(let u of a)u.startTimeStamp=y,y+=u.duration;n[s]=r[s]}else f==="transform"?n[s]=r.style.transform.match(new RegExp(`${s}\\((\\w+)\\)`))[1]:f==="style"?n[s]=r.style[s]:n[s]=r[s]}l.push(n)}}},c=(r,n,s,a,f,y=!1)=>{let u;if(typeof a=="string")if(u=a.endsWith("%")?"%":a.endsWith("px")?"px":null,u)a=parseFloat(a);else throw new TypeError("string value must ends with '%' or 'px'");let h=y?a:(a-n)*s+n;u&&(h+=u);let p=$(r,f);p==="transform"?r.style.transform=`${f}(${h}${u?"":"px"})`:p==="style"?r.style[f]=h:r[f]=h},g=(r,n,s=!1)=>{t.targets.forEach((a,f)=>{Object.keys(t.dest).forEach(y=>{let u=parseFloat(l[f][y]),h=t.dest[y];if(typeof h=="object")if(Array.isArray(h)){let p=0;for(;p<h.length&&n-i>=h[p].startTimeStamp;)p++;let{value:d,duration:w,easing:b=t.easing,startTimeStamp:x}=h[p-1];u=p<=1?u:h[p-2].value;let A=E[b]()((n-i-x)/w);n<=i+w+x?c(a,u,A,d,y):s&&c(a,u,A,d,y,s)}else{let{value:p,duration:d,easing:w=t.easing}=h,b=E[w]()((n-i)/d);n<=i+d?c(a,u,b,p,y):s&&c(a,u,b,p,y,s)}else typeof h=="function"&&(h=h(a,f)),c(a,u,r,h,y,s)})})},m=()=>{let r=Date.now();if(r>e)g(1,r,!0),typeof t.complete=="function"&&t.complete(t.targets),t.isPlay=!1;else{if(r>=i){let n=E[t.easing]()((r-i)/t.duration);o&&g(n,r),typeof t.update=="function"&&t.update(t.targets)}requestAnimationFrame(m)}};M(),typeof t.begin=="function"&&t.begin(t.targets),m()},q=class{constructor(t=T){t={...T,...t};let{targets:i,duration:e,easing:o,delay:l,begin:M,update:c,complete:g,...m}=t;this.targets=i,this.duration=e,this.easing=o,this.delay=l,this.begin=M,this.update=c,this.complete=g,this.dest=m||{},this.tl=null,this.isPlay=!1}timeline(){return this.tl||(this.tl=new P),this.tl}play(){this.isPlay||(this.isPlay=!0,I(this))}},O=t=>new q(t);O.random=(t,i)=>Math.floor(Math.random()*(i-t+1))+t;export{O as a};
